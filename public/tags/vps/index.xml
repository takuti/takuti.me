<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Vps on takuti.me</title>
    <link>http://localhost:1313/tags/vps/</link>
    <description>Recent content in Vps on takuti.me</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 19 Jul 2013 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/vps/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>さくらVPSにRubyを入れたらSSHで入れなくなった</title>
      <link>http://localhost:1313/note/sakura-vps-ssh-permission/</link>
      <pubDate>Fri, 19 Jul 2013 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/note/sakura-vps-ssh-permission/</guid>
      <description>&lt;p&gt;焦った。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://akabeko.me/blog/2012/05/revps-09-ruby-redmine-subversion/#revps-09-01&#34;&gt;さくらのVPS を改めて使いはじめる 9 &amp;#8211; Ruby、Redmine、Subversion | アカベコマイリ&lt;/a&gt;&lt;br /&gt;
ここに従ってRubyをインストールしたら、その直後からSSHでVPSに入れなくなった。&lt;/p&gt;
&lt;p&gt;なんか&lt;br /&gt;
&lt;strong&gt;Permission denied (publickey,gssapi-keyex,gssapi-with-mic).&lt;/strong&gt;&lt;br /&gt;
って出る。怖い。&lt;/p&gt;
&lt;p&gt;しかし理由は単純で、SSHで入ろうとしたユーザのホームディレクトリのパーミッションがおかしくなっていた様子。&lt;br /&gt;
【参考】&lt;a href=&#34;http://cns-guide.sfc.keio.ac.jp/1999/11/4/2.html&#34;&gt;4.2 ホームディレクトリに移動できない&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ので、&lt;a href=&#34;https://secure.sakura.ad.jp/vpscontrol/&#34;&gt;さくらVPSのコントロールパネル&lt;/a&gt;からクソ使いづらいリモートコンソールもしくはVNCコンソールからrootで入って、そのユーザのホームディレクトリをchmodしてあげて解決。&lt;/p&gt;
&lt;p&gt;原因はなんだったんでしょうか・・・。&lt;/p&gt;
&lt;pre&gt;$ sudo yum install openssl-devel readline-devel zlib-devel curl-devel libyaml-devel mysql-devel httpd-devel ImageMagick ImageMagick-devel&lt;/pre&gt;
&lt;p&gt;このときに入れたどれかかなぁ。&lt;/p&gt;
&lt;h3&gt;追記(2013.08.02)&lt;/h3&gt;
&lt;p&gt;この件について詳しく書かれているエントリがありました。chownをしないと、chmodでいくらパーミッションを変えてもSFTPでPermission Deniedになるなどの状態が続きます。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://blog.ao-oni.net/sakura-vps-006/&#34;&gt;青鬼 | さくらVPS Ruby Redmine Subversion&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>